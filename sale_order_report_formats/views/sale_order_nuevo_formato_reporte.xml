<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <template id="reporte_sale_order_coopsol">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <div class="header">
                    <div class="row" style="border-width: thin;border-bottom-style: ridge; font-size:60px;">
                        <div class="col-4">
                            <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)"  alt="Logo" style="max-height: 260px; max-width: 220px; vertical-align: baseline; " />
                        </div>  
                        <div class="col-3">
                        </div>
                        <div class="col-5" style="font-weight: normal; font-size:16px; text-align: right;color:#454545;">
                            <t t-if="o.company_id">
                                <t t-if="o.company_id.vat">
                                    <span>[</span> <span t-field="o.company_id.vat"></span> <span>]</span>
                                </t>
                                <t t-if="o.company_id.name">
                                    <span style="color:#454545;" t-field="o.company_id.name"> </span>
                                </t>
                            </t>
                        </div>
                    </div>
                </div>

                <div class="footer">
                    <div style="border-width: 5px;border-top-style: solid; font-size:16px;">
                        <div class="row">
                            <div class="col-12" style="font-weight: normal; font-size:16px; text-align: center;">
                                    <t t-if="o.company_id.phone">
                                        <span style="color:#454545;" >Tel.: </span>
                                        <span style="color:#454545;"  t-field="o.company_id.phone"></span>
                                    </t>

                                    <t t-if="o.company_id.email">
                                        <span style="position:relative;left:9px; color:#454545;" >Correo: </span>
                                        <span style="position:relative;left:9px; color:#454545;" t-field="o.company_id.email"></span>
                                    </t>

                                    <t t-if="o.company_id.website">
                                        <span style="position:relative;left:18px; color:#454545;" >Red: </span>
                                        <span style="position:relative;left:18px; color:#454545;"  t-field="o.company_id.website"></span>
                                    </t>

                                    <t t-if="o.company_id.vat">
                                        <span style="position:relative;left:27px; color:#454545;" >RUC: </span>
                                        <span style="position:relative;left:27px; color:#454545;"  t-field="o.company_id.vat"></span>
                                    </t>
                                    <br/>
                                    <ul class="list-inline">
                                        <span>Page:</span>
                                        <span class="page"/>
                                        <span>/</span>
                                        <span class="topage"/>
                                    </ul>
                            </div>
                        </div>
                    </div>   
                </div>

                <div t-attf-class="article o_report_layout_standard o_company_#{o.company_id.id}_layout"  t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
                    
                        <div class="page"> 
                            <t t-if="o.partner_id.name">
                                <span style= "font-size:18px; color:#454545;font-family: Arial;" t-field="o.partner_id.name"></span>
                                <br/>
                            </t>
                            <t t-if="o.partner_id.street">
                                <span style= "font-size:18px; color:#454545;font-family: Arial;" t-field="o.partner_id.street"></span>
                                <br/>
                            </t>

                            <t t-if="o.partner_id.vat">
                                <span style= "font-size:18px; color:#454545;font-family: Arial;">RUC: </span>
                                <span style= "font-size:18px; color:#454545;font-family: Arial;" t-field="o.partner_id.vat"></span>
                                <br/>
                            </t>
                            <br/>
                            <t t-if="o.user_id">
                                <span style= "font-size:18px; color:#454545;font-family: Arial;">Atencion:</span>
                                <span style= "font-size:18px; color:#454545;font-family: Arial;" t-field="o.user_id.name"></span>
                                <br/>
                            </t>
                            
                            <br/><br/>
                            <t t-if="o.state in ('draft','sent')">
                                <span style= "font-size:18px;font-family: Arial;">Cotización #</span>
                                <span style= "font-weight: bold;font-size:18px;font-family: Arial;" t-field="o.name"></span>
                                <br/><br/>
                            </t>
                            <t t-if="o.state in ('sale','done','cancel')">
                                <span style= "font-size:18px;font-family: Arial;">Pedido #</span>
                                <span style= "font-weight: bold;font-size:18px;font-family: Arial;" t-field="o.name"></span>
                                <br/><br/>
                            </t>
                            <div class="row">
                                <div class="col-3">
                                    <t t-if="o.state in ('draft','sent')">
                                        <t t-if="o.date_order">
                                            <span style="font-weight: bold; font-size:18px;font-family: Arial;">Fecha del presupuesto:</span>
                                            <br/>
                                            <span style="font-weight: normal; font-size:18px; color:#454545;font-family: Arial;" t-esc="o.date_order.date()"></span>
                                        </t>
                                    </t>
                                    <t t-if="o.state in ('sale','done','cancel')">
                                        <t t-if="o.date_order">
                                            <span style="font-weight: bold; font-size:18px;font-family: Arial;">Fecha de orden:</span>
                                            <br/>
                                            <span style="font-weight: normal; font-size:18px; color:#454545;font-family: Arial;" t-esc="o.date_order.date()"></span>
                                        </t>
                                    </t>
                                </div>
                                
                                <t t-if="o.validity_date">
                                    <div class="col-3">
                                        <span style="font-weight: bold; font-size:18px;font-family: Arial;">Fecha de caducidad:</span>
                                        <br/>
                                        <span style="font-weight: normal; font-size:18px; color:#454545;font-family: Arial;" t-esc="o.validity_date"></span>
                                    </div>
                                </t>

                                
                                <t t-if="o.user_id">
                                    <div class="col-3">
                                        <span style="font-weight: bold; font-size:18px;font-family: Arial;">Comercial:</span>
                                        <br/>
                                        <span style="font-weight: normal; font-size:18px; color:#454545;font-family: Arial;" t-field="o.user_id"></span>
                                    </div>
                                </t>
                                
                                <t t-if="o.payment_term_id">
                                    <div class="col-3">
                                        <span style="font-weight: bold; font-size:18px;font-family: Arial;">Plazo de pago:</span>
                                        <br/>
                                        <span style="font-weight: normal; font-size:18px; color:#454545;font-family: Arial;" t-field="o.payment_term_id.name"></span>
                                    </div>
                                </t>
                            </div>
                            <br/>



                            <t t-if="o.order_line">
                                <table style="width: 320mm;">
                                    <tbody>
                                        <tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                                        <tr>
                                            <td style="border-width: thin;border-top-style: solid;border-left-style: solid;border-right-style: solid; font-weight: bold; font-size:16px; text-align: center;padding: 10px;">
                                                <center style="font-size:17.5px;font-weight: bold;font-family: Arial;" >ITEM</center>
                                            </td>
                                            <td style="border-width: thin;border-top-style: solid;border-left-style: solid;border-right-style: solid; font-weight: bold; font-size:16px; text-align: left;padding: 10px;">
                                                <span styles="font-size:17.5px;font-weight: bold;font-family: Arial;" >DESCRIPCIÓN</span>
                                            </td>
                                            <td style="border-width: thin;border-top-style: solid;border-left-style: solid;border-right-style: solid; font-weight: bold; font-size:16px; text-align: center;padding: 10px;">
                                                <center styles="font-size:17.5px;font-weight: bold;font-family: Arial;" >CANTIDAD</center>
                                            </td>
                                            <td style="border-width: thin;border-top-style: solid;border-left-style: solid;border-right-style: solid; font-weight: bold; font-size:16px; text-align: right;padding: 10px;">
                                                <span styles="font-size:17.5px;font-weight: bold;font-family: Arial;" >UNI. DE MEDIDA</span>
                                            </td>
                                            <td style="border-width: thin;border-top-style: solid;border-left-style: solid;border-right-style: solid; font-weight: bold; font-size:16px; text-align: right;padding: 10px;">
                                                <center styles="font-size:17.5px;font-weight: bold;font-family: Arial;" >PRECIO UNITARIO</center>
                                            </td>
                                            <td style="border-width: thin;border-top-style: solid;border-left-style: solid;border-right-style: solid; font-weight: bold; font-size:16px; text-align: center;padding: 10px;">
                                                <center styles="font-size:17.5px;font-weight: bold;font-family: Arial;" >SUBTOTAL</center>
                                            </td>
                                        </tr>
                                        <t t-set="contador" t-value="1"/>

                                        <t t-foreach="o.order_line" t-as="linea" >
                                            <t t-if="contador == len(o.order_line)">
                                            <tr>
                                                <td style="border-width: thin;border-left-style: ridge;border-bottom-style: ridge;border-right-style: ridge; font-weight: normal; font-size:18px; text-align: left;padding: 10px;">
                                                    <span style="color:#454545;font-family: Arial;" t-esc="contador"/>
                                                </td>
                                                <td style="border-width: thin;border-left-style: ridge;border-right-style: ridge;border-bottom-style: ridge; font-weight: normal; font-size:18px; text-align: left;padding: 10px;">
                                                    <t t-if="linea.name">
                                                        <span style="color:#454545;font-family: Arial;" t-field="linea.name"/>
                                                    </t>
                                                </td>
                                                <td style="border-width: thin;border-left-style: ridge;border-right-style: ridge;border-bottom-style: ridge; font-weight: normal; font-size:18px; text-align: right;padding: 10px;">
                                                    <t t-if="linea.product_uom_qty">
                                                        <span style="color:#454545;font-family: Arial;" t-esc="str('%.2f'%linea.product_uom_qty)"/>
                                                    </t>
                                                </td>
                                                <td style="border-width: thin;border-left-style: ridge;border-right-style: ridge;border-bottom-style: ridge; font-weight: normal; font-size:18px; text-align: left;padding: 10px;">
                                                    <t t-if="linea.product_uom">
                                                        <span style="color:#454545;font-family: Arial;" t-esc="linea.product_uom.name" />
                                                    </t>
                                                </td>
                                                <td style="border-width: thin;border-left-style: ridge;border-right-style: ridge;border-bottom-style: ridge; font-weight: normal; font-size:18px; text-align: right;padding: 10px;">
                                                    <t t-if="linea.price_unit">
                                                        <span style="color:#454545;font-family: Arial;" t-esc="str('%.2f'%linea.price_unit)"/>
                                                    </t>
                                                </td>
                                                <td style="background-color: #D5D4D4;border-width: thin;border-left-style: ridge;border-bottom-style: ridge;border-right-style: ridge; font-weight: normal; font-size:18px; text-align: right;padding: 10px;">
                                                    <span style="color:#454545;font-family: Arial;" t-esc="o.pricelist_id.currency_id.symbol +str('%.2f'%linea.price_subtotal)"/>
                                                </td>
                                            </tr>
                                        </t>
                                        <t t-if="contador &lt; len(o.order_line)">
                                            <tr>
                                                <td style="border-width: thin;border-left-style: ridge;border-right-style: ridge; font-weight: normal; font-size:18px; text-align: left;padding: 10px;">
                                                    <span style="color:#454545;font-family: Arial;" t-esc="contador"/>
                                                </td>
                                                <td style="border-width: thin;border-left-style: ridge;border-right-style: ridge; font-weight: normal; font-size:18px; text-align: left;padding: 10px;">
                                                    <t t-if="linea.name">
                                                        <span style="color:#454545;font-family: Arial;" t-field="linea.name"/>
                                                    </t>
                                                </td>
                                                <td style="border-width: thin;border-left-style: ridge;border-right-style: ridge; font-weight: normal; font-size:18px; text-align: right;padding: 10px;">
                                                    <t t-if="linea.product_uom_qty">
                                                        <span style="color:#454545;font-family: Arial;" t-field="linea.product_uom_qty"/>
                                                    </t>
                                                </td>
                                                <td style="border-width: thin;border-left-style: ridge;border-right-style: ridge; font-weight: normal; font-size:18px; text-align: left;padding: 10px;">
                                                    <t t-if="linea.product_uom">
                                                        <span style="color:#454545;font-family: Arial;" t-esc="linea.product_uom.name" />
                                                    </t>
                                                </td>
                                                <td style="border-width: thin;border-left-style: ridge;border-right-style: ridge; font-weight: normal; font-size:18px; text-align: right;padding: 10px;">
                                                    <t t-if="linea.price_unit">
                                                        <span style="color:#454545;font-family: Arial;" t-esc="str('%.2f'%linea.price_unit)"/>
                                                    </t>
                                                </td>
                                                <td style="background-color: #D5D4D4;border-width: thin;border-left-style: ridge;border-right-style: ridge; font-weight: normal; font-size:18px; text-align: right;padding: 10px;">
                                                    <span style="color:#454545;font-family: Arial;" t-esc="o.pricelist_id.currency_id.symbol +str('%.2f'%linea.price_subtotal)"/>
                                                </td>
                                            </tr>
                                        </t>














                                            <t t-set="contador" t-value="contador+1"/>
                                        </t>
                                    </tbody>
                                </table>
                                <br/>
                                <div align="right">
                                    <table style="width: 80mm">
                                        <tbody>
                                            <tr><td></td><td></td></tr>
                                            <tr>
                                                <td style="border-width: thin;border-left-style: solid;border-right-style: solid;border-top-style: solid; font-weight: bold; font-size:18px; text-align: left; min-width: 55px; min-height: 55px;font-family: Arial;padding: 10px;">
                                                    <span>Subtotal</span>
                                                </td>
                                                <td style="border-width: thin;border-left-style: solid;border-right-style: solid;border-top-style: solid; font-weight: normal; font-size:18px; text-align: right; min-width: 55px; min-height: 55px;padding: 10px;">
                                                    <span style="color:#454545;font-family: Arial;" t-esc="o.pricelist_id.currency_id.symbol +str('%.2f'%o.amount_untaxed)"/>
                                                </td>
                                            </tr>
                                            <t t-set="count" t-value="o.get_distribucion_impuestos_txt()" />
                                            <t t-foreach="count" t-as="linea_tax" >
                                                <tr>
                                                    <td style="border-width: thin;border-left-style: ridge;border-right-style: ridge;border-top-style: ridge; font-weight: bold; font-size:18px; text-align: left;font-family: Arial;padding: 10px;">
                                                        
                                                        <span t-esc="linea_tax[0]"/>
                                                        <span t-esc="en + o.pricelist_id.currency_id.symbol +str('%.2f'%o.amount_total)"/>
                                                    </td>
                                                    <td style="background-color: #D5D4D4;border-width: thin;border-left-style: ridge;border-right-style: ridge;border-top-style: ridge; font-weight: normal; font-size:18px;font-family: Arial; text-align: right;padding: 10px;">
                                                        <span t-esc="o.pricelist_id.currency_id.symbol"/>
                                                        <span t-esc="linea_tax[1]"/>
                                                    </td>
                                                </tr>
                                            </t>
                                            <tr>
                                                <td style="color:#FFFFFF; background-color: black;border-width: thin;border-left-style: ridge;border-right-style: ridge;border-top-style: ridge; font-weight: bold; font-size:18px;font-family: Arial; text-align: left;padding: 10px;">
                                                    <span>Total</span>
                                                </td>
                                                <td style="color:#FFFFFF; background-color: black;border-width: thin;border-left-style: ridge;border-right-style: ridge;border-top-style: ridge; font-weight: normal; font-size:18px;font-family: Arial; text-align: right;padding: 10px;">
                                                    <span t-esc="o.pricelist_id.currency_id.symbol +str('%.2f'%o.amount_total)"/>
                                                </td>
                                            </tr>        
                                        </tbody>
                                    </table>
                                </div>
                                <br/>
                                    <t t-if="o.note">
                                        <span style="color:#454545;font-family: Arial;font-size:18px;" t-field="o.note"> </span>
                                    </t>
                            </t>



                        </div>
                </div>
            </t>
        </t>
    </template>



        <record id="paperformat_despacho_it_copsol" model="report.paperformat">
            <field name="name">Reporte Despacho</field>
            <field name="default" eval="False" />
            <field name="format">A4</field>
            <field name="page_height">0</field>
            <field name="page_width">0</field>
            <field name="orientation">Portrait</field>
            <field name="margin_top">50</field>
            <field name="margin_bottom">24</field>
            <field name="margin_left">7</field>
            <field name="margin_right">7</field>
            <field name="header_line" eval="False" />
            <field name="header_spacing">45</field>
            <field name="dpi">90</field>
        </record>


    <report 
        id="action_sale_order_coopsol"
        string="Presupuesto/Pedido"
        model="sale.order"
        report_type="qweb-pdf"
        file="sale_order_report_formats.reporte_sale_order_coopsol"
        name="sale_order_report_formats.reporte_sale_order_coopsol"
        paperformat="sale_order_report_formats.paperformat_despacho_it_copsol"
        print_report_name="'Orden de Despacho N° - %s' % (object.name)"
        />
</odoo>
                